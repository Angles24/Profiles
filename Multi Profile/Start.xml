<?xml version="1.0" encoding="utf-8"?>
<!--
Blank Profile
-->
<Profile>
	<Name>Blank Profile</Name>
	<BehaviorDirectory>../Quest Behaviors</BehaviorDirectory>
	<CodeChunks>	
	</CodeChunks>	
	<Order>	
	
	<!-- Check to see if we have Gathering at level 21 -->
	<If Condition="ClassName != ClassJobType.Miner">
		<ChangeClass Job="Miner" />
			<If Condition="ClassName != ClassJobType.Miner">
				<LoadProfile Path="[MIN] Leveling 1-20 + 1-15 Quests.xml"/>	
			</If>
	</If>		
	<If Condition="ClassName == ClassJobType.Miner">
		<RunCode Name="AutoEquip"/>
		<RunCode Name="UpdateGearSet"/>
			<If Condition="Core.Me.Levels[ClassJobType.Miner] &lt; 21">
				<LoadProfile Path="[MIN] Leveling 1-20 + 1-15 Quests.xml"/>
			</If>
	</If>
	<If Condition="ClassName != ClassJobType.Botanist">
		<ChangeClass Job="Botanist" />
			<If Condition="ClassName != ClassJobType.Botanist">
				<LoadProfile Path="[BTN] Leveling 1-20 + 1-15 Quests.xml"/>	
			</If>
	</If>		
	<If Condition="ClassName == ClassJobType.Botanist">
		<RunCode Name="AutoEquip"/>
		<RunCode Name="UpdateGearSet"/>
			<If Condition="Core.Me.Levels[ClassJobType.Botanist] &lt; 21">
				<LoadProfile Path="[BTN] Leveling 1-20 + 1-15 Quests.xml"/>
			</If>
	</If>
	
	<!-- Grind DoH Classes to 20+
	
	Craft Gathering and Crafting Gear
	
	Unlock Ishgard Profile ( call for a battle class ) Call for a stop, Clean Bags. Next part require at least 100 free slots
	
	Craft Ishgard Items(Call for Kayla's Ishgard Turnins) 10 each at a time till 51
	
	Gather to 51	
	
	Craft Gathering and Crafting Gear level 51
	
	Craft Ishgard Items(Call for Kayla's Ishgard Turnins) 10 each at a time till 63 & 68 non preferred realm
	
	Gather to 53

	Craft Gathering level 53 weapons
	
	Gather to 63
	
	Farm Yellow Scrip Gathering Gear
	
	Do DoH Class Quests
	
	Farm Yellow Scrip Crafting Gear
	
	Craft Ishgard Items(Call for Kayla's Ishgard Turnins) 10 each at a time till 80
	Or Leves -->
	
	
	<!-- Update Gear Sets & Check if we have Gear Sets for Crafting or not already -->
	
	<!-- Check to see if we have unlock all Crafting Profiles -->		
	<If Condition="not IsQuestCompleted(65727)">
		<LogMessage Message="Going to learn Crafting Classes!" />
		<LoadProfile Path="UnlockDoH.xml"/>	
	</If>
	<If Condition="not IsQuestCompleted(65722)">
		<LogMessage Message="Going to learn Crafting Classes!" />
		<LoadProfile Path="UnlockDoH.xml"/>		
	</If>
	<If Condition="not IsQuestCompleted(65809)">
		<LogMessage Message="Going to learn Crafting Classes!" />
		<LoadProfile Path="UnlockDoH.xml"/>	
	</If>
	<If Condition="not IsQuestCompleted(65721)">
		<LogMessage Message="Going to learn Crafting Classes!" />
		<LoadProfile Path="UnlockDoH.xml"/>	
	</If>
	<If Condition="not IsQuestCompleted(65720)">
		<LogMessage Message="Going to learn Crafting Classes!" />
		<LoadProfile Path="UnlockDoH.xml"/>	
	</If>
	<If Condition="not IsQuestCompleted(65724)">
		<LogMessage Message="Going to learn Crafting Classes!" />
		<LoadProfile Path="UnlockDoH.xml"/>	
	</If>
	<If Condition="not IsQuestCompleted(65723)">
		<LogMessage Message="Going to learn Crafting Classes!" />
		<LoadProfile Path="UnlockDoH.xml"/>		
	</If>
	<If Condition="not IsQuestCompleted(65725)">
		<LogMessage Message="Going to learn Crafting Classes!" />
		<LoadProfile Path="UnlockDoH.xml"/>	
	</If>
		
	
	
	
	
	
	
	
	
	
	
	
	
	</Order>
	<CodeChunks>
		<CodeChunk Name="AutoEquip">
        <![CDATA[ 
            var patternFinder = new GreyMagic.PatternFinder(Core.Memory);
            IntPtr agentVtable = patternFinder.Find("48 8D 05 ? ? ? ? C6 43 ? ? 48 89 03 48 8B C3 C7 43 ? ? ? ? ? Add 3 TraceRelative");
            int id = AgentModule.FindAgentIdByVtable(agentVtable);

            AtkAddonControl windowByName = RaptureAtkUnitManager.GetWindowByName("RecommendEquip");

            if (windowByName == null)
            {
                AgentModule.GetAgentInterfaceById(id).Toggle();
            }

            await Coroutine.Wait(10000, () => RaptureAtkUnitManager.GetWindowByName("RecommendEquip") != null);
            
            windowByName = RaptureAtkUnitManager.GetWindowByName("RecommendEquip");
            
            if (windowByName != null)
            {
                windowByName.SendAction(1, 3, 0);
            }
        ]]>
        </CodeChunk>
		<CodeChunk Name="UpdateGearSet">
		<![CDATA[ 
		   var patternFinder = new GreyMagic.PatternFinder(Core.Memory);
            IntPtr agentCharVtable = patternFinder.Find("48 8D 05 ? ? ? ? 89 77 ? Add 3 TraceRelative");
			int idChar = AgentModule.FindAgentIdByVtable(agentCharVtable);

			AtkAddonControl windowByName = RaptureAtkUnitManager.GetWindowByName("Character");

			if (windowByName == null)
			{
				AgentModule.GetAgentInterfaceById(idChar).Toggle();
			}

			await Coroutine.Wait(5000, () => RaptureAtkUnitManager.GetWindowByName("Character") != null);

			windowByName = RaptureAtkUnitManager.GetWindowByName("Character");

			if (windowByName != null)
			{
				windowByName.SendAction(1, 3, 0xF);
			}
            
            await Coroutine.Wait(1000, () => SelectYesno.IsOpen);

            if (SelectYesno.IsOpen)
                SelectYesno.Yes();

			await Coroutine.Wait(1000, () => !SelectYesno.IsOpen);
			
            await Coroutine.Sleep(200);
			
			windowByName = RaptureAtkUnitManager.GetWindowByName("Character");

			if (windowByName != null)
			{
				AgentModule.GetAgentInterfaceById(idChar).Toggle();
			}
			
		]]>
		</CodeChunk>
	</CodeChunks>
</Profile>
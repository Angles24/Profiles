<?xml version="1.0" encoding="utf-8"?>
<!--
Auto Equip - Angles / Kayla
-->
<Profile>
	<Name>Recommend Equip</Name>
	<BehaviorDirectory>../Quest Behaviors</BehaviorDirectory>
	<KillRadius>90</KillRadius>
	<CodeChunks>
		<CodeChunk Name="RecommendEquip">
      <![CDATA[	
			var temp = AgentModule.GetAgentInterfaceById(207);
			temp.Toggle();
			
			await Coroutine.Sleep(1000);
			
			var patternFinder = new GreyMagic.PatternFinder(Core.Memory);
			IntPtr agentVtable= patternFinder.Find("48 8D 05 ? ? ? ? C6 43 ? ? 48 89 03 48 8B C3 C7 43 ? ? ? ? ? Add 3 TraceRelative");
			int id = AgentModule.FindAgentIdByVtable(agentVtable);

			AtkAddonControl windowByName = RaptureAtkUnitManager.GetWindowByName("RecommendEquip");

			if (windowByName == null)
				AgentModule.GetAgentInterfaceById(id).Toggle();

			if (windowByName != null)
			{
			windowByName.SendAction(1,3,0);
			}
	  ]]>
    </CodeChunk>
	<CodeChunk Name="AutoEquip">
            <![CDATA[ 
            var patternFinder = new GreyMagic.PatternFinder(Core.Memory);
            IntPtr agentVtable = patternFinder.Find("48 8D 05 ? ? ? ? C6 43 ? ? 48 89 03 48 8B C3 C7 43 ? ? ? ? ? Add 3 TraceRelative");
            int id = AgentModule.FindAgentIdByVtable(agentVtable);

            AtkAddonControl windowByName = RaptureAtkUnitManager.GetWindowByName("RecommendEquip");

            if (windowByName == null)
            {
                AgentModule.GetAgentInterfaceById(id).Toggle();
            }

            await Coroutine.Wait(10000, () => RaptureAtkUnitManager.GetWindowByName("RecommendEquip") != null);
            
            windowByName = RaptureAtkUnitManager.GetWindowByName("RecommendEquip");
            
            if (windowByName != null)
            {
                windowByName.SendAction(1, 3, 0);
            }
            ]]>
        </CodeChunk>
	
	</CodeChunks>	
	<Order>
		
		<RunCode Name="AutoEquip"/>			
		
	</Order>
	<GrindAreas>
	</GrindAreas>
</Profile>
